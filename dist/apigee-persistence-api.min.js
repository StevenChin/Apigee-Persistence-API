"use strict";angular.module("apigeePersistenceApiApp").service("CollectionRepository",["DataClientUtil","DataValidationUtil","$log","RequestOptions",function(a,b,c,d){var e=function(a,e,f,g){var h=null;if(b.isValidDataClient(a)&&b.isValidString(e)){var i=angular.copy(d.getCollection);i.client=a,i.type=e,f&&b.isValidString(f)&&(i.qs.ql=f),g&&b.isValidNumber(g)&&(i.qs.limit=g),h=new Apigee.Collection(i)}else c.error("Initialization of collection could not be performed. At least one of the following occurred:\n- dataClient was invalid\n- type was invalid\n");return h},f=[],g=function(){this.entities=[]},h=function(a,d){a?c.error(a):b.isValidDataEntities(d)?this.entities.push.apply(this.entities,d.entities):i()},i=function(){c.error("Data Entities for collection is invalid. One of the following occurred:\n- data entities is undefined\n- data entities is null\n- data entities is not an array\n")},j=function(a){return b.isValidCollection(a)?(this.clearEntities(),a.fetch(function(d,e){if(d)c.error(d);else if(b.isValidDataEntities(e))for(this.entities=e.entities;a.hasNextPage();)a.getNextPage(h);else i()})):c.error("Entities from the collection could not be retrieved, collection was invalid"),f};return{initCollection:e,getAll:j,entities:f,clearEntities:g}}]),angular.module("apigeePersistenceApiApp").service("DataClientUtil",["$log","DataValidationUtil",function(a,b){var c=function(c,d){var e=null;return b.isValidString(c)&&b.isValidString(d)?e=new Apigee.Client({orgName:c,appName:d}):a.error("Intialization of data client could not be performed. At least one of the following occurred:\n- orgName was invalid\n- appName was invalid\n"),e},d=function(c,d,e,f){if(b.isValidString(d)&&b.isValidString(e)&&b.isValidDataClient(c)){var g=b.isValidFunction(f);c.login(d,e,function(b,c){b?(a.error("login error: "+b),g&&f(b,null)):g&&f(null,c)})}else a.error("Login could not be performed. At least one of the following occurred:\n- username was invalid\n- password was invalid\n- dataClient was invalid")};return{initDataClient:c,login:d}}]),angular.module("apigeePersistenceApiApp").service("DataValidationUtil",[function(){var a=function(a){return Object.prototype.toString.call(a).slice(8,-1)},b=function(a){return"String"===this.getDataType(a)?!0:!1},c=function(a){return void 0===a||null===a?!1:a.hasOwnProperty("monitoringEnabled")&&a.hasOwnProperty("monitor")&&a.hasOwnProperty("orgName")&&a.hasOwnProperty("appName")&&a.hasOwnProperty("URI")?!0:!1},d=function(a){return"Number"===this.getDataType(a)?!0:!1},e=function(a){return"Function"===this.getDataType(a)?!0:!1},f=function(a){return void 0===a||null===a?!1:a.hasOwnProperty("_client")&&this.isValidDataClient(a._client)&&a.hasOwnProperty("_type")&&a.hasOwnProperty("qs")?!0:!1},g=function(a){var b=!1;return a&&a.entities&&"Array"===this.getDataType(a.entities)&&(b=!0),b};return{getDataType:a,isValidString:b,isValidDataClient:c,isValidNumber:d,isValidFunction:e,isValidCollection:f,isValidDataEntities:g}}]);